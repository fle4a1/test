# Использование менеджера зависимостей Poetry

Poetry является модным менеджером зависимостей, который может автоматически создавать виртуальное окружение и управлять зависимостями вашего проекта. Установить его можно несколькими способами.

### Способ 1: установка через pip

Для установки Poetry нужно выполнить следующую команду:
```
pip install poetry
```

### Способ 2: установка через curl

Вы можете использовать curl для загрузки и установки Poetry:
```
curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python
```

После этого необходимо перезапустить терминал, чтобы изменения вступили в силу.

### Способ 3: установка через brew (для macOS)

Если вы используете macOS, то можете установить Poetry с помощью менеджера пакетов Homebrew:
```
brew install poetry
```

## Интеграция Poetry в проект с уже имеющимися зависимостями

Если у вашего проекта уже есть файлы pyproject.toml и poetry.lock:

1. Убедитесь, что параметр `virtualenvs.in-project` равен `true` (`poetry config --list`), если параметр не усановлен выполните команду `poetry config virtualenvs.in-project true`
2. Выполните команду `poetry install`. Это автоматически создаст виртуальное окружение и установит все необходимые зависимости.

## Установка пакетов для групп

Установка пакетов производится командой `poetry add <package>`
Если библиотеку необходимо установить в определенную группу:
`poetry add --group <group_name> <package>`
Вы можете определить группы зависимостей в файле `pyproject.toml` и устанавливать только нужные группы. Для этого 

## Команды для запуска на продакшен среде

Для установки только необходимых зависимостей в продакшен среде выполните следующую команду:
```
poetry install --no-dev --no-root
```

Для установки всех зависимостей, включая тестовые и dev, выполните следующую команду:
```
poetry install
```

## Описание основных параметров конфигурации Poetry

- virtualenvs.in-project: Если этот параметр имеет значение `true`, то Poetry будет создавать виртуальное окружение в папке проекта, а не глобально. По умолчанию этот параметр равен `false`.
- virtualenvs.path: Путь к папке, в которой будут создаваться виртуальные окружения.
- cache-dir: Путь к папке, в которой Poetry будет хранить кэшированные данные о зависимостях.
- experimental.new-installer: Если это параметр имеет значение `true`, то Poetry будет использовать новый экспериментальный установщик, который может установить зависимости быстрее.

Для получения полного списка командой можно выполнить следующую команду:
```
poetry config --list
```

## Удаление библиотек в Poetry

Чтобы удалить библиотеку с помощью Poetry, выполните команду `poetry remove`:

```
poetry remove <package-name>
```

Например, чтобы удалить библиотеку requests, вы можете выполнить следующую команду:

```
poetry remove requests
```

## Обновление библиотек в Poetry

Для обновления пакетов в проекте используйте команду `poetry update`. Эта команда обновит все пакеты в вашем файле `pyproject.toml` до последних версий. Если необходимо обновить только конкретный пакет, напишите его имя после команды `poetry update`:

```
poetry update <package-name>
```

Если у вас есть файл блокировки зависимостей (`poetry.lock`), то обновление произойдет именно на основе этого файла. Если же такого файла нет, будут установлены последние доступные версии зависимостей.

Обратите внимание, что при использовании команды `poetry update`, могут возникнуть конфликты версий зависимостей. Если это происходит, рекомендуется обращаться к документации соответствующих библиотек или сообществу разработчиков для решения этих конфликтов.
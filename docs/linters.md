# Работа с линтерами

## Установка через poetry
В проекте уже установлены нижеописанные линтеры, необходимо просто активировать виртуальное окружение
с помощью poetry, [предварительно установив библиотеку](poetry.md)
Активация окружения
```shell
poetry shell
```

## Линтеры и их настройки
Все линтеры запускаются из внутренней директории app/ после активации poetry

### Flake8

[Linter Flake8](https://flake8.pycqa.org/en/latest/) используется для проверки стиля кода и обнаружения ошибок. Конфигурации для Flake8 находятся в файле `.flake8`.

Для запуска Flake8 отдельно, нужно выполнить команды:

```
poetry run flake8 --config .flake8

```

### Black

[Linter Black](https://github.com/psf/black) предназначен для автоматического форматирования кода. Конфигурации для Black находятся в файле `pyproject.toml`.

Для запуска Black отдельно, нужно перейти в корень проекта и выполнить команду:

```
poetry run black .
```

### Mypy

[Linter Mypy](http://mypy-lang.org/) используется для проверки типов и обнаружения ошибок в типах данных. Конфигурации для Mypy находятся в файле `pyproject.toml`.

Для запуска Mypy отдельно, нужно перейти в корень проекта и выполнить команду:

```
poetry run mypy .
```

## Библиотека pre-commit

[Библиотека pre-commit](https://pre-commit.com/) обеспечивает удобную интеграцию линтеров Flake8, Black, Mypy и других.

После установки библиотеки pre-commit и зависимостей из файла requirements.txt необходимо выполнить команду в директории с проектом:

```
pre-commit install
```

Эта команда создаст локальный репозиторий pre-commit и создаст ссылки на хуки pre-commit при каждом коммите.

Теперь, когда пользователь пытается отправить коммит через консоль `git commit -m ""` или нажимает кнопку "Commit" в IDE Pycharm, автоматически включаются линтеры и Mypy. Если линтер обнаруживает ошибки, коммит прерывается до исправления ошибок.

Установка хука для проверки сообщения коммита
```bash
poetry run gitlint install-hook
```
## Запуск линтеров

Для запуска линтеров нужно находиться в корне проекта и можно запускать каждый линтер отдельно командами:
- Flake8: `flake8 --config .flake8`
- Mypy: `poetry run mypy .`
- Black: `poetry run black .`

При коммите автоматически запускаются все линтеры и Mypy, но если необходимо проверить код на ошибки отдельно, то можно запустить каждый линтер индивидуально.